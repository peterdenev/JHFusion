!function(a,b){"use strict";"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.TemplateEngine=b()}(this,function(){var a=function(a,b){for(var g,c=/<%(.+?)%>/g,d=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,e="with(obj) { var r=[];\n",f=0,h=function(a,b){return e+=b?a.match(d)?a+"\n":"r.push("+a+");\n":""!=a?'r.push("'+a.replace(/"/g,'\\"')+'");\n':"",h};match=c.exec(a);)h(a.slice(f,match.index))(match[1],!0),f=match.index+match[0].length;h(a.substr(f,a.length-f)),e=(e+'return r.join(""); }').replace(/[\r\t\n]/g,"");try{g=new Function("obj",e).apply(b,[b])}catch(i){console.error("'"+i.message+"'"," in \n\nCode:\n",e,"\n")}return g};return a});